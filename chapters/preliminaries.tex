\chapter*{Preliminaries}
\addcontentsline{toc}{chapter}{Preliminaries}

% 0.1
\section{Basics}
The set 
\[
    f(A)=\{b\in B\mid b\in f(a),\text{ for some }a\in A\},
\]
is a subset of $B$, called the \textit{range} or \textit{image} of $f$.
For each subset $C$ of $B$ the set 
\[
    f^{-1}(C)=\{a\in A\mid f(a)\in C\}
\]
consisting of the elements of $A$ mapping into $C$ under $f$ is called the \textit{preimage} or \textit{inverse image} of $C$ under $f$.
For each $b\in B$, the preimage of $\{b\}$ under $f$ is called the \textit{fiber} of $f$ over $b$.

Let $f:A\to B$.
\begin{enumerate}[(1)]
        \item $f$ is \textit{injective} or is an \textit{injection} if whenever $a_1\neq a_2$, then $f(a_1)\neq f(a_2)$.
        \item $f$ is \textit{surjective} or is an \textit{surjection} if for all $b\in B$ there is some $a\in A$ such that $f(a)=b$; i.e., the image of $f$ is all of $B$. 
        (The codomain of $f$ is $B$, while the range/image of $f$ is the subset $f(A):=\{b\in B:b=f(a), \text{ for some }a\in A\}$)
        \item $f$ is \textit{bijective} or is an \textit{bijection} if it is both injective and surjective.
        \item $f$ has a \textit{left inverse} if there is a function $g:B\to A$ such that $g\circ f:A\to A$ is the identity map on $A$; i.e., $(g\circ f)(a)=a$, for all $a\in A$.
        \item $f$ has a \textit{right inverse} if there is a function $h:B\to A$ such that $f\circ h:B\to B$ is the identity map on $B$; i.e., $(f\circ h)(b)=b$, for all $b\in B$.
    \end{enumerate}
\begin{namedthm*}{Proposition 1}
    Let $f:A\to B$.
    \begin{enumerate}[(1)]
        \item The map $f$ is injective iff $f$ has a left inverse.
        \item The map $f$ is surjective iff $f$ has a right inverse.
        \item The map $f$ is a bijection iff there exists $g:B\to A$ such that $f\circ g$ is the identity map on $B$ and $g\circ f$ is the identity map on $A$.
        (The map $g$ is necessarily unique and we say $g$ is the 2-sided \textit{inverse} of $f$)
        \item If $A$ and $B$ are finite sets with the same number of elements ($|A|=|B|$), then $f:A\to B$ is bijective iff $f$ is injective iff $f$ is surjective.
    \end{enumerate}
    \begin{proof}
    
    \begin{enumerate}[(1)]
        \item Suppose $f$ is injective. 
        Now, note that by definition of image of $f$, for all $c\in f(A)$, there exists $a\in A$ s.t. $c=f(a)$.
        Thus for all such $c$, we may define the function $g:f(A)\to A$ by $g(f(a))=g(c):=a$.
        Note that $g$ is well-defined as a function because each unique $c\in B$ corresponds to a unique $a\in A$ ($c_1=f(a_1)= f(a_2)=c_2$ implies $g(c_1)=a_1=a_2=g(c_2)$).
        We may extend $g$ to all of $B$ arbitrarily.
        On the other hand, suppose $f$ has a left inverse.
        Consider any $a_1,a_2\in A$ such that $f(a_1)=f(a_2)$.
        Then $a_1=g(f(a_1))=g(f(a_2))=a_2$.
        \item Suppose $f$ is surjective. 
        Then for any $b\in B$, there exists some $a\in A$ such that $f(a)=b$. 
        Thus it is well-defined to define the function $h:B\to A$ such that $h(b)=a$, and we have $f(h(b))=f(a)=b$.
        On the other hand, suppose $f$ has a right inverse.
        Consider any $b\in B$.
        Then $f(h(b))=b$, with $a=h(b)\in A$
        \item Suppose $f$ is a bijection.
        Then by (1) and (2), there exists a left inverse $g$ and a right inverse $h$.
        Fix any $b\in B$.
        Then by surjectivity of $f$, there exists $a\in A$ such that $b=f(a)$.
        But then $g(b)=g(f(a))=a=h(b)$, and $g\equiv h$ is the inverse of $f$.
        \item Bijective implies injective and surjective by definition.
        Now suppose $f$ is injective.
        Suppose that for all $a\in A$ there does not exist $b\in B$ whence $f(a)=b$.
        But by the pidgeonhole principle there must be (distinct) $a_1\neq a_2\in A$ that map to the same element in $B$; i.e., $f(a_1)=f(a_2)$, and this is a contradiction to the injectivity.
        On the other hand suppose $f$ is surjective.
        Suppose that there exists $a_1\neq a_2\in A$ but $f(a_1)=f(a_2)$.
        Again by the pidgeonhole principle there must be a $b\in B$ that is not mapped to, which is a contradiction.
    \end{enumerate}
    \end{proof}
    Let $A$ be a nonempty set.
    \begin{enumerate}[(1)]
        \item A \textit{binary relation} on a set $A$ is a subset $R$ of $A\times A$ and we write $a\sim b$ if $(a,b)\in R$.
        \item The relation $\sim$ on $A$ is said to be:
        \begin{enumerate}[(a)]
            \item \textit{reflexive} if $a\sim a$ for all $a\in A$,
            \item \textit{symmetric} if $a\sim b$ implies $b\sim a$ for all $a,b\in A$,
            \item \textit{transitive} if $a\sim b$ and $b\sim c$ implies $a\sim c$ for all $a,b,c\in A$.
        \end{enumerate}
        A relation is an \textit{equivalence relation} if it is reflexive, symmetric, and transitive.
        \item If $\sim$ defines an equivalence relation on $A$, then the \textit{equivalence class} of $a\in A$ is defined to be $\{x\in A\mid x\sim a\}$.
        Elements of the equivalence class of $a$ are said to be \textit{equivalent} to $a$.
        If $C$ is an equivalence class, any element of $C$ is called a \textit{representative} of the class $C$.
        \item A \textit{partition} of $A$ is any collection $\{A_i\mid i\in I\}$ of nonempty subsets of $A$ ($I$ some indexing set) such that 
        \begin{enumerate}[(a)]
            \item $A=\cup_{i\in I}A_i$, and 
            \item $A_i\cap A_j=\emptyset$, for all $i,j\in I$ with $i\neq j$.
        \end{enumerate}
    \end{enumerate}
    \begin{namedthm*}{Preposition 2}
        Let $A$ be a nonempty set.
        \begin{enumerate}[(1)]
            \item If $\sim$ defines an equivalence relation on $A$ then the set of equivalence classes of $\sim$ form a partition of $A$.
            \item If $\{A_i\mid i\in I\}$ is a partition of $A$ then there is an equivalence relation on $A$ whose equivalence classes are precisely the sets $A_i,i\in I$.
        \end{enumerate}
    \end{namedthm*}
\end{namedthm*}
\subsection*{\centering EXERCISES}
In exercises 1 to 4 let $\mathcal{A}$ be the set of $2\times2$ matrices with real number entries.
Recall that matrix multiplication is defined by
\[
    \begin{pmatrix}
        a&b\\c&d
    \end{pmatrix}
    \begin{pmatrix}
        p&q\\r&s
    \end{pmatrix}
    =
    \begin{pmatrix}
        ap+br&aq+bs\\cp+dr&cq+ds
    \end{pmatrix}.
\]
Let 
\[
    M=\begin{pmatrix}
        1&1\\0&1
    \end{pmatrix}
\]
and let 
\[
    \mathcal{B}:=\{X\in\mathcal{A}\mid MX=XM\}.
\]
\begin{enumerate}
    \item Determine which of the following elements of $\mathcal{A}$ lie in $\mathcal{B}$:
    \[
        \begin{pmatrix}
            1&1\\0&1
        \end{pmatrix},
        \begin{pmatrix}
            1&1\\1&1
        \end{pmatrix},
        \begin{pmatrix}
        0&0\\0&0
    \end{pmatrix},
    \begin{pmatrix}
        1&1\\1&0
    \end{pmatrix},
    \begin{pmatrix}
        1&0\\0&1
    \end{pmatrix},
    \begin{pmatrix}
        0&1\\1&0
    \end{pmatrix}
    \]
    \ \\The first is trivially yes.
    The second is no:
    \[
    \begin{pmatrix}
            1&1\\0&1
        \end{pmatrix}
        \begin{pmatrix}
            1&1\\1&1
        \end{pmatrix}
        =
        \begin{pmatrix}
            2&2\\1&1
        \end{pmatrix}
        \neq
        \begin{pmatrix}
            1&2\\1&2
        \end{pmatrix}
        =
        \begin{pmatrix}
            1&1\\1&1
        \end{pmatrix}
        \begin{pmatrix}
            1&1\\0&1
        \end{pmatrix}
    \]
    The third is trivially yes.
    The fourth is no:
    \[
    \begin{pmatrix}
            1&1\\0&1
        \end{pmatrix}
        \begin{pmatrix}
            1&1\\1&0
        \end{pmatrix}
        =
        \begin{pmatrix}
            2&1\\1&0
        \end{pmatrix}
        \neq
        \begin{pmatrix}
            1&2\\1&1
        \end{pmatrix}
        =
        \begin{pmatrix}
            1&1\\1&0
        \end{pmatrix}
        \begin{pmatrix}
            1&1\\0&1
        \end{pmatrix}
    \]
    The fifth is yes (identity).
    The sixth is no:
    \[
    \begin{pmatrix}
            1&1\\0&1
        \end{pmatrix}
        \begin{pmatrix}
            0&1\\1&0
        \end{pmatrix}
        =
        \begin{pmatrix}
            1&1\\1&0
        \end{pmatrix}
        \neq
        \begin{pmatrix}
            0&1\\1&1
        \end{pmatrix}
        =
        \begin{pmatrix}
            0&1\\1&0
        \end{pmatrix}
        \begin{pmatrix}
            1&1\\0&1
        \end{pmatrix}
    \]
    \item Prove that if $P,Q\in\mathcal{B}$, then $P+Q\in\mathcal{B}$.
%     \begin{align*}
%     \left(\begin{pmatrix}
%         a&b\\c&d
%     \end{pmatrix}
%     +
%     \begin{pmatrix}
%         p&q\\r&s
%     \end{pmatrix}
%     \right)
%     \begin{pmatrix}
%         1&1\\0&1
%     \end{pmatrix}
%     =\begin{pmatrix}
%         a&b\\c&d
%     \end{pmatrix}
%     \begin{pmatrix}
%         1&1\\0&1
%     \end{pmatrix}
%     +
%     \begin{pmatrix}
%         p&q\\r&s
%     \end{pmatrix}
%     \begin{pmatrix}
%         1&1\\0&1
%     \end{pmatrix}
%     \\=\begin{pmatrix}
%         1&1\\0&1
%     \end{pmatrix}
%     \begin{pmatrix}
%         a&b\\c&d
%     \end{pmatrix}
%     +
%     \begin{pmatrix}
%         1&1\\0&1
%     \end{pmatrix}
%     \begin{pmatrix}
%         p&q\\r&s
%     \end{pmatrix}
%     \\=\begin{pmatrix}
%         1&1\\0&1
%     \end{pmatrix}
%     \left(\begin{pmatrix}
%         a&b\\c&d
%     \end{pmatrix}
%     +
%     \begin{pmatrix}
%         p&q\\r&s
%     \end{pmatrix}
%     \right)
% \end{align*}
\[
        (P+Q)M=PM+QM=MP+MQ=M(P+Q)
\]
    \item Prove that if $P,Q\in\mathcal{B}$, then $P\cdot Q\in\mathcal{B}$.
    \[
        (PQ)M=P(QM)=P(MQ)=(PM)Q=(MP)Q=M(PQ)
\]
    \item Find conditions on $p,q,r,s$ which determine precisely when $\begin{pmatrix}
        p&q\\r&s
    \end{pmatrix}\in\mathcal{B}$.
    \[
    \begin{pmatrix}
        p&p+q\\r&r+s
    \end{pmatrix}=
    \begin{pmatrix}
        p&q\\r&s
    \end{pmatrix}
    \begin{pmatrix}
        1&1\\0&1
    \end{pmatrix}
    =
    \begin{pmatrix}
        1&1\\0&1
    \end{pmatrix}
    \begin{pmatrix}
        p&q\\r&s
    \end{pmatrix}
    =
    \begin{pmatrix}
        p+r&q+s\\r&s
    \end{pmatrix}
\]
Thus we have 
\begin{align*}
    \begin{cases}
        p=p+r\\
        r=r\\
        p+q=q+s\\
        r+s=s
    \end{cases}
    \implies
    \begin{cases}
        0=r\\
        p=s
    \end{cases}
\end{align*}
    \item Determine whether the following functions $f$ are well-defined:
    \begin{enumerate}
        \item $f : \mathbb{Q} \to \mathbb{Z}$ defined by $f(a/b) = a$;
        
        Yes, because the rational numbers are defined to be $\{a/b:a,b\in\mathbb{Z}, b\neq0\}$.
        \item $f : \mathbb{Q} \to \mathbb{Q}$ defined by $f(a/b) = a^2/b^2$;
        
        Yes, because $a,b\in\mathbb{Z}\implies a^2,b^2\in\mathbb{Z}$, and $b\neq0\implies b^2\neq0$.
    \end{enumerate}
    \item Determine whether the function $f : \mathbb{R}^+ \to \mathbb{Z}$ defined by mapping a real number $r$ to the first digit to the right of the decimal point in a decimal expansion of $r$ is well defined.
    
    False: see $0.0\overline{9}=0.1$, but $0=f(0.0\overline{9})=f(0.1)=1$, and $f$ is not a function.
    \item Let $f: A \to B$ be a surjective map of sets. Prove that the relation
    \[
        a \sim b \iff f(a) = f(b)
    \]
    is an equivalence relation whose equivalence classes are the fibers of $f$.

    See that $f(a)=f(a)$, and $f(a)=f(b)$ implies $f(b)=f(a)$, and $f(a)=f(b)$ and $f(b)=f(c)$ implies $f(a)=f(b)=f(c)$.
    Also see that
    \[
        f^{-1}(\{b\})=\{a\in A\mid f(a)=b\}.
    \]
\end{enumerate}

% 0.2
\section{Properties of the Integers}
\begin{enumerate}[(1)]
    \item (Well Ordering of $\mathbb{Z}$)
    If $A$ is any nonempty subset of $\mathbb{Z}^+$, there is some element $m\in A$ such that $m\le a$, for all $a\in A$ ($m$ is called a \textit{minimal element} of $A$).
    \item If $a,b\in\mathbb{Z}$ with $a\neq0$, we say $a$ \textit{divides} $b$ if there is an element $c\in\mathbb{Z}$ such that $b=ac$ (i.e., $b/a$ is an integer).
    In this case we write $a\mid b$; if $a$ does not divide $b$ we write $a\not\mid b$.
    \item If $a,b\in\mathbb{Z}\setminus\{0\}$, there is a unique positive integer $d$, called the \textit{greatest common divisor} (gcd) of $a$ and $b$, satisfying:
    \begin{enumerate}[(a)]
        \item $d\mid a$ and $d\mid b$
        \item if $e\mid a$ and $e\mid b$ then $e\mid d$.
    \end{enumerate}
    The gcd of $a$ and $b$ will be denoted $(a,b)$.
    If $(a,b)=1$, we say that $a$ and $b$ are \textit{relatively prime}.
    \item If $a,b\in\mathbb{Z}\setminus\{0\}$, there is a unique positive integer $l$, called the \textit{least common multiple} (lcm) of $a$ and $b$, satisfying:
    \begin{enumerate}[(a)]
        \item $a\mid l$ and $b\mid l$
        \item if $a\mid m$ and $b\mid m$ then $l\mid m$.
    \end{enumerate}
    The connection between the gcd $d$ and lcm $l$ of any two such $a,b$ is given by $dl=ab$.
    \item \textit{The Division Algorithm}: if $a,b\in\mathbb{Z}\setminus\{0\}$, then there exist unique $q,r\in\mathbb{Z}$ such that 
    \[
        a=qb+r,\quad 0\le r<|b|,
    \]
    where $q$ is the \textit{quotient} and $r$ is the \textit{remainder}.
    \item  The \textit{Euclidean Algorithm} is an important procedure which produces a greatest common divisor of two integers $a$ and $b$ by iterating the Division Algorithm: 
    if $a,b\in\mathbb{Z}\setminus\{0\}$, then we obtain a sequence of quotients and remainders
    \begin{align*}
        a&=q_0b+r_0&&(0)\\
        b&=q_1r_0+r_1&&(1)\\
        r_0&=q_2r_1+r_2&&(2)\\
        r_1&=q_3r_2+r_3&&(3)\\
        &\vdots\\
        r_{n-2}&=q_nr_{n-1}+r_n&&(n)\\
        r_{n-1}&=q_{n+1}r_{n}\ (r_{n+1}=0)&&(n+1)
    \end{align*}
    where $r_n$ is the last nonzero remainder.
    Such an $r_n$ exists since $|b|>|r_0|>|r_1|>\dots>|r_n|$ is a decreasing sequence of strictly positive integers if the remainders are nonzero and such a sequence cannot continue indefinitely.
    Then $r_n$ is the gcd $(a,b)$ of $a$ and $b$.
    % \begin{namedthm*}{Example}
    % $a=57970$, $b=10353$
    % \begin{align*}
    %     57970&=(5)10353+6205\\
    %     10353&=(1)6205+4148\\
    %     6205&=(1)4148+2057\\
    %     4148&=(2)2057+34\\
    %     2057&=(60)34+17\\
    %     34&=(2)17,
    % \end{align*}
    % so that $(57970,10353)=17$.
    % \end{namedthm*}
    \item One consequence of the Euclidean Algorithm:
    if $a,b\in\mathbb{Z}\setminus\{0\}$, then there exist $x,y\in\mathbb{Z}$ such that 
    \[
        (a,b)=ax+by.
    \]
    \item An element $p$ of $\mathbb{Z}^+$ is called a \textit{prime} if $p>1$ and the only positive divisors of $p$ are $1$ and $p$.
    Elements of $\mathbb{Z}^+$ that are not prime are called \textit{composite}.
    \item The \textit{Fundamental Theorem of Arithmetic says}:
    if $n\in\mathbb{Z}_{>1}$, then $n$ can be factored uniquely into the product of primes;
    i.e., there are distinct primes $p_1,p_2,\dots,p_n$ and positive integers $\alpha_1,\alpha_2,\dots,\alpha_n$ such that 
    \[
        n=p_1^{\alpha_1}p_2^{\alpha_2}\dots p_n^{\alpha_n}.
    \]
    This factorization is unique.
    Suppose we have two positive integers $a$ and $b$ with the prime factorizations
    \[
        a=p_1^{\alpha_1}p_2^{\alpha_2}\dots p_n^{\alpha_n},\quad 
        b=p_1^{\beta_1}p_2^{\beta_2}\dots p_n^{\beta_n},
    \]
    and the $p_i$ are unique and allow the $\alpha_i,\beta_i\ge0$.
    Then the greatest common divisor of $a$ and $b$ is 
    \[
        (a,b)=p_1^{\min(\alpha_1,\beta_1)}p_2^{\min(\alpha_2,\beta_2)}\dots p_n^{\min(\alpha_n,\beta_n)}.
    \]
    Then similarly the least common multiple is obtained by taking each maximum instead of the minimum.
    \item The \textit{Euler $\varphi$-function} is defined as follows:
    for $n\in\mathbb{Z}^+$, let $\varphi(n)$ be the number of positive integers $a\le n$ with $a$ relatively prime to $n$; i.e., $(a,n)=1$.
    For primes $p$ we have $\varphi(p)=p-1$, and more generally for all $a\ge1$ we have the formula
    \[
        \varphi(p^a)=p^a-p^{a-1}=p^{a-1}(p-1).
    \]
    The function $\varphi$ is \textit{multiplicative} in the sense that
    \[
        \varphi(ab)=\varphi(a)\varphi(b)\quad\text{if }(a,b)=1.
    \]
\end{enumerate}
\subsection*{\centering EXERCISES}
\begin{enumerate}
    \item For each of the following pairs of integers $a$ and $b$, determine:
    \begin{itemize}
        \item their greatest common divisor ($\gcd(a,b)$),
        \item their least common multiple ($\text{lcm}(a,b)$),
        \item and write their greatest common divisor in the form $ax + by$ for some integers $x$ and $y$.
    \end{itemize}

    \begin{enumerate}[(a)]
        \item $a = 20,\quad b = 13$
        
        gcd: $1$, lcm: $260$
        \item $a = 69,\quad b = 372$
        
        gcd: $3$, lcm: $8556$
        \item $a = 792,\quad b = 275$
        
        gcd: $11$, lcm: $19800$
        \item $a = 11391,\quad b = 5673$
        
        gcd: $3$, lcm: $21540381$
        \item $a = 1761,\quad b = 1567$
        
        gcd: $1$, lcm: $2759487$
        \item $a = 507885,\quad b = 60808$
        
        gcd: $691$, lcm: $44693880$
    \end{enumerate}

    \item Prove that if the integer $k$ divides the integers $a$ and $b$, then $k$ divides $as + bt$ for every pair of integers $s$ and $t$.
    \item Prove that if $n$ is composite then there are integers $a$ and $b$ such that $n \mid ab$ but $n \nmid a$ and $n \nmid b$.

    \item Let $a$, $b$, and $N$ be fixed integers with $a$ and $b$ nonzero, and let $d = (a, b)$ be the greatest common divisor of $a$ and $b$. Suppose $x_0$ and $y_0$ are particular solutions to $ax + by = N$ (i.e., $ax_0 + by_0 = N$). Prove that for any integer $t$, the integers
    \[
    x = x_0 + \frac{b}{d}t \quad \text{and} \quad y = y_0 - \frac{a}{d}t
    \]
    are also solutions to $ax + by = N$ (this is in fact the general solution).

    \item Determine the value $\varphi(n)$ for each integer $n \leq 30$ where $\varphi$ denotes the Euler $\varphi$ function.

    \item Prove the Well-Ordering Property of $\mathbb{Z}$ by induction and prove that the minimal element is unique.

    \item If $p$ is a prime, prove that there do not exist nonzero integers $a$ and $b$ such that $a^2 = p b^2$ (i.e., $\sqrt{p}$ is not a rational number).

    \item Let $p$ be a prime and $n \in \mathbb{Z}^+$. Find a formula for the largest power of $p$ which divides $n! = n(n - 1)(n - 2)\cdots 2 \cdot 1$ (it involves the greatest integer function).

    \item Write a computer program to determine the greatest common divisor $(a, b)$ of two integers $a$ and $b$ and to express $(a, b)$ in the form $ax + by$ for some integers $x$ and $y$.

    \item Prove that for any given positive integer $N$ there exist only finitely many integers $n$ with $\varphi(n) = N$ where $\varphi$ denotes the Euler $\varphi$ function. Conclude in particular that $\varphi(n)$ tends to infinity as $n$ tends to infinity.

    \item Prove that if $d$ divides $n$ then $\varphi(d)$ divides $\varphi(n)$ where $\varphi$ denotes the Euler $\varphi$ function.
\end{enumerate}
% 0.3
\section{$\mathbb{Z}/n\mathbb{Z}$: The Integers Modulo $n$}
abcdefg